buildscript {
  repositories {
    mavenCentral()
    maven {
      url 'https://plugins.gradle.org/m2/'
    }
  }

  dependencies {
    classpath 'com.github.node-gradle:gradle-node-plugin:2.2.4'
  }
}

apply plugin: 'com.github.node-gradle.node'

node {
  // Version of node to use.
  version = '10.16.0'
  npmVersion = '6.9.0'

  // If true, it will download node using above parameters.
  // If false, it will try to use globally installed node.
  download = true
}

setBuildDir('dist/frontend')

task serve(type: NpmTask, dependsOn: 'npm_run_start') {
  group = 'application'
  description = 'Run the client app'
  args = ['run', 'serve']
}

task build(type: NpmTask) {
  group = 'build'
  description = 'Build the client bundle'
  args = ['run', 'build']
}
